<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿De quién es esto? - Adjetivos posesivos + verbo to be</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            padding: 30px;
            text-align: center;
        }

        h1 {
            color: #4a6fa5;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .subtitle {
            color: #6b8cbc;
            margin-bottom: 25px;
            font-size: 16px;
        }

        .game-container {
            margin: 25px 0;
        }

        .sentence-container {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 18px;
            line-height: 1.5;
            border: 2px dashed #d1d9e6;
        }

        .spanish-sentence {
            color: #4a6fa5;
            font-weight: 500;
            margin-bottom: 15px;
            font-size: 16px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e6ed;
            background-color: #eef2f7;
            padding: 12px;
            border-radius: 8px;
        }

        .english-sentence {
            font-size: 18px;
            font-weight: 500;
            margin-top: 15px;
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input-container {
            flex: 1;
            min-width: 120px;
        }

        .input-label {
            display: block;
            font-size: 14px;
            color: #4a6fa5;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #d1d9e6;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
            text-align: center;
        }

        input:focus {
            outline: none;
            border-color: #4a6fa5;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }

        input.error {
            border-color: #d9534f;
            background-color: #fdf7f7;
        }

        button {
            background-color: #4a6fa5;
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(74, 111, 165, 0.2);
        }

        button:hover {
            background-color: #3a5a8a;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(74, 111, 165, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .feedback {
            margin: 15px 0;
            min-height: 30px;
            font-size: 18px;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .error-message {
            color: #d9534f;
            font-size: 14px;
            margin-top: 5px;
        }

        .score-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #f0f4f8;
            border-radius: 12px;
        }

        .score {
            font-size: 18px;
            font-weight: 500;
            color: #4a6fa5;
        }

        .progress-bar {
            height: 10px;
            background-color: #e0e6ed;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress {
            height: 100%;
            background-color: #4a6fa5;
            width: 0%;
            transition: width 0.5s;
        }

        .result-screen {
            display: none;
            padding: 20px;
        }

        .result-emoji {
            font-size: 60px;
            margin-bottom: 15px;
        }

        .result-message {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #4a6fa5;
        }

        .result-score {
            font-size: 18px;
            margin-bottom: 25px;
            color: #6b8cbc;
        }

        .restart-btn {
            background-color: #5cb85c;
            margin-top: 15px;
        }

        .restart-btn:hover {
            background-color: #4cae4c;
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            .input-container {
                min-width: 100%;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .sentence-container {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>¿De quién es esto?</h1>
        <p class="subtitle">Practica adjetivos posesivos + verbo to be</p>
        
        <div class="game-screen" id="gameScreen">
            <div class="game-container">
                <div class="sentence-container" id="sentenceContainer">
                    <!-- La oración se insertará aquí -->
                </div>
                
                <div class="input-group">
                    <div class="input-container">
                        <div class="input-label">Adjetivo posesivo</div>
                        <input type="text" id="possessiveInput" placeholder="Ej: my, your, his...">
                        <div class="error-message" id="possessiveError"></div>
                    </div>
                    <div class="input-container">
                        <div class="input-label">Verbo to be</div>
                        <input type="text" id="verbInput" placeholder="Ej: am, is, are">
                        <div class="error-message" id="verbError"></div>
                    </div>
                </div>
                
                <button id="checkBtn">Verificar</button>
                
                <div class="feedback" id="feedback">
                    <!-- Retroalimentación se mostrará aquí -->
                </div>
            </div>
            
            <div class="score-container">
                <div>
                    <div class="score">Puntuación: <span id="score">0</span>/20</div>
                    <div class="progress-bar">
                        <div class="progress" id="progressBar"></div>
                    </div>
                </div>
                <div id="questionCount">Pregunta 1/20</div>
            </div>
        </div>
        
        <div class="result-screen" id="resultScreen">
            <div class="result-emoji" id="resultEmoji"></div>
            <div class="result-message" id="resultMessage"></div>
            <div class="result-score" id="resultScore"></div>
            <button class="restart-btn" id="restartBtn">Jugar de nuevo</button>
        </div>
    </div>

    <script>
        // Banco de oraciones con respuestas correctas - 20 oraciones
        const sentences = [
            { 
                spanish: "Él se llama Peter.", 
                english: "____ name ____ Peter.", 
                possessive: "His", 
                verb: "is"
            },
            { 
                spanish: "Yo tengo padres que son doctores.", 
                english: "____ parents ____ doctors.", 
                possessive: "My", 
                verb: "are"
            },
            { 
                spanish: "Ella tiene una hermana que es maestra.", 
                english: "____ sister ____ a teacher.", 
                possessive: "Her", 
                verb: "is"
            },
            { 
                spanish: "Nosotros tenemos un perro que es amigable.", 
                english: "____ dog ____ very friendly.", 
                possessive: "Our", 
                verb: "is"
            },
            { 
                spanish: "Ellos tienen amigos que son de España.", 
                english: "____ friends ____ from Spain.", 
                possessive: "Their", 
                verb: "are"
            },
            { 
                spanish: "Tú tienes un carro que es rojo.", 
                english: "____ car ____ red.", 
                possessive: "Your", 
                verb: "is"
            },
            { 
                spanish: "El gato tiene una casa que es grande.", 
                english: "____ house ____ big.", 
                possessive: "Its", 
                verb: "is"
            },
            { 
                spanish: "Yo tengo un hermano y nosotros somos estudiantes.", 
                english: "____ brother and I ____ students.", 
                possessive: "My", 
                verb: "are"
            },
            { 
                spanish: "Él tiene una madre que está en el trabajo.", 
                english: "____ mother ____ at work.", 
                possessive: "His", 
                verb: "is"
            },
            { 
                spanish: "Ella tiene libros que están en la mesa.", 
                english: "____ books ____ on the table.", 
                possessive: "Her", 
                verb: "are"
            },
            { 
                spanish: "Yo tengo un gato que está dormido.", 
                english: "____ cat ____ asleep.", 
                possessive: "My", 
                verb: "is"
            },
            { 
                spanish: "Tú tienes padres que están en casa.", 
                english: "____ parents ____ at home.", 
                possessive: "Your", 
                verb: "are"
            },
            { 
                spanish: "Él tiene un teléfono que es nuevo.", 
                english: "____ phone ____ new.", 
                possessive: "His", 
                verb: "is"
            },
            { 
                spanish: "Nosotros tenemos amigos que están en la fiesta.", 
                english: "____ friends ____ at the party.", 
                possessive: "Our", 
                verb: "are"
            },
            { 
                spanish: "Ellos tienen un maestro que es amable.", 
                english: "____ teacher ____ very nice.", 
                possessive: "Their", 
                verb: "is"
            },
            { 
                spanish: "Yo soy estudiante de inglés.", 
                english: "____ student of English.", 
                possessive: "I", 
                verb: "am"
            },
            { 
                spanish: "Nosotros tenemos una casa que es bonita.", 
                english: "____ house ____ beautiful.", 
                possessive: "Our", 
                verb: "is"
            },
            { 
                spanish: "Ellos tienen un coche que es azul.", 
                english: "____ car ____ blue.", 
                possessive: "Their", 
                verb: "is"
            },
            { 
                spanish: "Tú eres mi mejor amigo.", 
                english: "You ____ my best friend.", 
                possessive: "", 
                verb: "are"
            },
            { 
                spanish: "Yo soy un estudiante.", 
                english: "I ____ a student.", 
                possessive: "", 
                verb: "am"
            }
        ];

        // Variables del juego
        let currentSentenceIndex = 0;
        let score = 0;
        let usedSentences = [];
        const totalQuestions = 20;

        // Elementos DOM
        const sentenceContainer = document.getElementById('sentenceContainer');
        const possessiveInput = document.getElementById('possessiveInput');
        const verbInput = document.getElementById('verbInput');
        const checkBtn = document.getElementById('checkBtn');
        const feedback = document.getElementById('feedback');
        const scoreElement = document.getElementById('score');
        const questionCount = document.getElementById('questionCount');
        const progressBar = document.getElementById('progressBar');
        const gameScreen = document.getElementById('gameScreen');
        const resultScreen = document.getElementById('resultScreen');
        const resultEmoji = document.getElementById('resultEmoji');
        const resultMessage = document.getElementById('resultMessage');
        const resultScore = document.getElementById('resultScore');
        const restartBtn = document.getElementById('restartBtn');
        const possessiveError = document.getElementById('possessiveError');
        const verbError = document.getElementById('verbError');

        // Inicializar el juego
        function initGame() {
            currentSentenceIndex = 0;
            score = 0;
            usedSentences = [];
            updateScore();
            showNextSentence();
            
            // Mostrar pantalla de juego y ocultar resultados
            gameScreen.style.display = 'block';
            resultScreen.style.display = 'none';
            
            // Limpiar inputs y feedback
            possessiveInput.value = '';
            verbInput.value = '';
            feedback.innerHTML = '';
            clearErrors();
            possessiveInput.focus();
        }

        // Limpiar mensajes de error
        function clearErrors() {
            possessiveError.textContent = '';
            verbError.textContent = '';
            possessiveInput.classList.remove('error');
            verbInput.classList.remove('error');
        }

        // Validar campos
        function validateFields() {
            let isValid = true;
            clearErrors();

            const currentSentence = sentences[usedSentences[currentSentenceIndex]];
            
            // Solo validar adjetivo posesivo si la oración lo requiere
            if (currentSentence.possessive && possessiveInput.value.trim() === '') {
                possessiveError.textContent = 'Por favor ingresa el adjetivo posesivo';
                possessiveInput.classList.add('error');
                isValid = false;
            }

            // Validar verbo to be
            if (verbInput.value.trim() === '') {
                verbError.textContent = 'Por favor ingresa el verbo to be';
                verbInput.classList.add('error');
                isValid = false;
            }

            return isValid;
        }

        // Mostrar siguiente oración aleatoria
        function showNextSentence() {
            // Si ya hemos usado todas las oraciones, reiniciar la lista
            if (usedSentences.length === sentences.length) {
                usedSentences = [];
            }
            
            // Seleccionar una oración que no se haya usado
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * sentences.length);
            } while (usedSentences.includes(randomIndex));
            
            usedSentences.push(randomIndex);
            
            // Mostrar la oración en español e inglés
            const currentSentence = sentences[randomIndex];
            sentenceContainer.innerHTML = `
                <div class="spanish-sentence">${currentSentence.spanish}</div>
                <div class="english-sentence">${currentSentence.english}</div>
            `;
            
            // Actualizar contador de preguntas
            questionCount.textContent = `Pregunta ${currentSentenceIndex + 1}/${totalQuestions}`;
            
            // Actualizar barra de progreso
            progressBar.style.width = `${(currentSentenceIndex / totalQuestions) * 100}%`;
        }

        // Verificar respuesta
        function checkAnswer() {
            // Validar campos primero
            if (!validateFields()) {
                return;
            }

            const currentSentence = sentences[usedSentences[currentSentenceIndex]];
            const userPossessive = possessiveInput.value.trim().toLowerCase();
            const userVerb = verbInput.value.trim().toLowerCase();
            const correctPossessive = currentSentence.possessive.toLowerCase();
            const correctVerb = currentSentence.verb.toLowerCase();
            
            // Verificar si ambas respuestas son correctas
            // Si no hay adjetivo posesivo en la oración, solo validar el verbo
            let isCorrect;
            if (currentSentence.possessive === "") {
                isCorrect = userVerb === correctVerb;
            } else {
                isCorrect = userPossessive === correctPossessive && userVerb === correctVerb;
            }
            
            if (isCorrect) {
                score++;
                feedback.innerHTML = '✅ ¡Correcto!';
                feedback.style.color = '#5cb85c';
            } else {
                let correctAnswer;
                if (currentSentence.possessive === "") {
                    correctAnswer = currentSentence.verb;
                } else {
                    correctAnswer = `${currentSentence.possessive} ${currentSentence.verb}`;
                }
                feedback.innerHTML = `❌ Incorrecto. La respuesta correcta es: <strong>${correctAnswer}</strong>`;
                feedback.style.color = '#d9534f';
            }
            
            // Actualizar puntuación
            updateScore();
            
            // Pasar a la siguiente pregunta después de un breve retraso
            setTimeout(() => {
                currentSentenceIndex++;
                
                // Si hemos completado todas las preguntas, mostrar resultados
                if (currentSentenceIndex >= totalQuestions) {
                    showResults();
                } else {
                    // Mostrar siguiente oración
                    showNextSentence();
                    
                    // Limpiar inputs y feedback
                    possessiveInput.value = '';
                    verbInput.value = '';
                    feedback.innerHTML = '';
                    clearErrors();
                    possessiveInput.focus();
                }
            }, 1500);
        }

        // Actualizar puntuación en pantalla
        function updateScore() {
            scoreElement.textContent = score;
        }

        // Mostrar pantalla de resultados
        function showResults() {
            // Ocultar pantalla de juego y mostrar resultados
            gameScreen.style.display = 'none';
            resultScreen.style.display = 'block';
            
            // Actualizar barra de progreso al 100%
            progressBar.style.width = '100%';
            
            // Mostrar mensaje según la puntuación
            let emoji, message;
            
            if (score >= 18) {
                emoji = '🌟';
                message = '¡Excelente!';
            } else if (score >= 14) {
                emoji = '👍';
                message = '¡Bien hecho!';
            } else if (score >= 10) {
                emoji = '🧐';
                message = 'Sigue practicando';
            } else {
                emoji = '😅';
                message = 'Intenta de nuevo';
            }
            
            resultEmoji.textContent = emoji;
            resultMessage.textContent = message;
            resultScore.textContent = `Obtuviste ${score} de ${totalQuestions} respuestas correctas.`;
        }

        // Event Listeners
        checkBtn.addEventListener('click', checkAnswer);

        // Permitir enviar respuesta con Enter
        possessiveInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verbInput.focus();
            }
        });
        
        verbInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Limpiar errores al escribir
        possessiveInput.addEventListener('input', function() {
            if (this.value.trim() !== '') {
                possessiveError.textContent = '';
                this.classList.remove('error');
            }
        });

        verbInput.addEventListener('input', function() {
            if (this.value.trim() !== '') {
                verbError.textContent = '';
                this.classList.remove('error');
            }
        });

        restartBtn.addEventListener('click', initGame);

        // Inicializar el juego al cargar la página
        window.onload = initGame;
    </script>
</body>
</html>