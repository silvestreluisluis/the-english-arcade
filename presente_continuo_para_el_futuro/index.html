<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futuro con Presente Continuo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .game-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .situation {
            background-color: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        .options-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }
        .option {
            background-color: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.3s;
        }
        .option:hover {
            background-color: #2980b9;
        }
        .option:active {
            transform: scale(0.95);
        }
        .option.used {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        .sentence-container {
            min-height: 100px;
            border: 2px dashed #3498db;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            align-items: center;
            justify-content: center;
        }
        .sentence-part {
            background-color: #e8f4f8;
            padding: 8px 12px;
            border-radius: 5px;
            display: inline-block;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .sentence-part:hover {
            background-color: #d1e7f4;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            background-color: #2ecc71;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #27ae60;
        }
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        #check-btn {
            background-color: #3498db;
        }
        #check-btn:hover:not(:disabled) {
            background-color: #2980b9;
        }
        #reset-btn {
            background-color: #e74c3c;
        }
        #reset-btn:hover:not(:disabled) {
            background-color: #c0392b;
        }
        .score {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .feedback {
            text-align: center;
            min-height: 30px;
            font-weight: bold;
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        .correct {
            color: #2ecc71;
            background-color: #d4f4e4;
        }
        .incorrect {
            color: #e74c3c;
            background-color: #fadbd8;
        }
        .instructions {
            text-align: center;
            margin-bottom: 20px;
            color: #7f8c8d;
            font-style: italic;
        }
        .level-indicator {
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .sentence-type {
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
            color: #3498db;
        }
    </style>
</head>
<body>
    <h1>Futuro con Presente Continuo</h1>
    
    <div class="game-container">
        <div class="score">Puntuación: <span id="score-value">0</span></div>
        <div class="level-indicator">Nivel <span id="current-level">1</span> de <span id="total-levels">20</span></div>
        <div class="sentence-type" id="sentence-type"></div>
        <div class="instructions">Haz clic en las palabras para construir la oración correcta</div>
        
        <div class="situation" id="situation">
            <!-- La situación se cargará aquí -->
        </div>
        
        <div class="options-container" id="options-container">
            <!-- Las opciones se cargarán aquí -->
        </div>
        
        <div class="sentence-container" id="sentence-container">
            <!-- Las partes de la oración se colocarán aquí -->
        </div>
        
        <div class="feedback" id="feedback"></div>
        
        <div class="controls">
            <button id="reset-btn">Reiniciar</button>
            <button id="check-btn">Comprobar</button>
            <button id="next-btn">Siguiente</button>
        </div>
    </div>

    <script>
        // Datos del juego con 20 situaciones CORREGIDAS Y SIMPLIFICADAS
        const gameData = [
            // Oraciones positivas
            {
                situation: "Voy a cantar esta noche",
                correctSentence: "I am singing tonight",
                options: ["I", "am", "singing", "tonight"],
                type: "Positiva"
            },
            {
                situation: "Vamos a cocinar mañana",
                correctSentence: "We are cooking tomorrow",
                options: ["We", "are", "cooking", "tomorrow"],
                type: "Positiva"
            },
            {
                situation: "Ella va a manejar el sábado",
                correctSentence: "She is driving on Saturday",
                options: ["She", "is", "driving", "on", "Saturday"],
                type: "Positiva"
            },
            {
                situation: "Ellos van a jugar esta tarde",
                correctSentence: "They are playing this afternoon",
                options: ["They", "are", "playing", "this", "afternoon"],
                type: "Positiva"
            },
            {
                situation: "Él va a encontrarse con su jefe el lunes",
                correctSentence: "He is meeting his boss on Monday",
                options: ["He", "is", "meeting", "his", "boss", "on", "Monday"],
                type: "Positiva"
            },
            {
                situation: "Voy a llamar en una hora",
                correctSentence: "I am calling in one hour",
                options: ["I", "am", "calling", "in", "one", "hour"],
                type: "Positiva"
            },
            {
                situation: "Ella va a cambiar de trabajo el próximo mes",
                correctSentence: "She is changing jobs next month",
                options: ["She", "is", "changing", "jobs", "next", "month"],
                type: "Positiva"
            },
            {
                situation: "Vamos a limpiar la casa este fin de semana",
                correctSentence: "We are cleaning the house this weekend",
                options: ["We", "are", "cleaning", "the", "house", "this", "weekend"],
                type: "Positiva"
            },
            {
                situation: "Ellos van a bailar en la fiesta",
                correctSentence: "They are dancing at the party",
                options: ["They", "are", "dancing", "at", "the", "party"],
                type: "Positiva"
            },
            {
                situation: "Voy a vestirme para la boda",
                correctSentence: "I am dressing for the wedding",
                options: ["I", "am", "dressing", "for", "the", "wedding"],
                type: "Positiva"
            },
            
            // Oraciones negativas
            {
                situation: "No voy a asistir a la reunión mañana",
                correctSentence: "I am not attending the meeting tomorrow",
                options: ["I", "am", "not", "attending", "the", "meeting", "tomorrow"],
                type: "Negativa"
            },
            {
                situation: "Él no va a manejar rápido mañana",
                correctSentence: "He is not speeding tomorrow",
                options: ["He", "is", "not", "speeding", "tomorrow"],
                type: "Negativa"
            },
            {
                situation: "No vamos a alimentar a los animales",
                correctSentence: "We are not feeding the animals",
                options: ["We", "are", "not", "feeding", "the", "animals"],
                type: "Negativa"
            },
            {
                situation: "Ellos no van a apostar esta noche",
                correctSentence: "They are not betting tonight",
                options: ["They", "are", "not", "betting", "tonight"],
                type: "Negativa"
            },
            {
                situation: "No te vas a inclinar sobre la mesa",
                correctSentence: "You are not leaning on the table",
                options: ["You", "are", "not", "leaning", "on", "the", "table"],
                type: "Negativa"
            },
            {
                situation: "Ella no se va a arrastrar en la fiesta",
                correctSentence: "She is not creeping at the party",
                options: ["She", "is", "not", "creeping", "at", "the", "party"],
                type: "Negativa"
            },
            {
                situation: "Él no se va a arrodillar mañana",
                correctSentence: "He is not kneeling tomorrow",
                options: ["He", "is", "not", "kneeling", "tomorrow"],
                type: "Negativa"
            },
            {
                situation: "No vamos a barrer el garaje",
                correctSentence: "We are not sweeping the garage",
                options: ["We", "are", "not", "sweeping", "the", "garage"],
                type: "Negativa"
            },
            {
                situation: "Ellos no van a beber alcohol",
                correctSentence: "They are not drinking alcohol",
                options: ["They", "are", "not", "drinking", "alcohol"],
                type: "Negativa"
            },
            {
                situation: "No me voy a caer de la bicicleta",
                correctSentence: "I am not falling off the bike",
                options: ["I", "am", "not", "falling", "off", "the", "bike"],
                type: "Negativa"
            },
            
            // Oraciones interrogativas
            {
                situation: "¿Vas a cantar mañana?",
                correctSentence: "Are you singing tomorrow?",
                options: ["Are", "you", "singing", "tomorrow", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Él va a cavar hoy?",
                correctSentence: "Is he digging today?",
                options: ["Is", "he", "digging", "today", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ellos van a atrapar la pelota?",
                correctSentence: "Are they catching the ball?",
                options: ["Are", "they", "catching", "the", "ball", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ella va a tomar el autobús?",
                correctSentence: "Is she taking the bus?",
                options: ["Is", "she", "taking", "the", "bus", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Vamos a llegar a tiempo?",
                correctSentence: "Are we arriving on time?",
                options: ["Are", "we", "arriving", "on", "time", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ella va a cepillarse el cabello?",
                correctSentence: "Is she brushing her hair?",
                options: ["Is", "she", "brushing", "her", "hair", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ellos van a rogar por ayuda?",
                correctSentence: "Are they begging for help?",
                options: ["Are", "they", "begging", "for", "help", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Él va a creer la historia?",
                correctSentence: "Is he believing the story?",
                options: ["Is", "he", "believing", "the", "story", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ellos van a cerrar la tienda?",
                correctSentence: "Are they closing the store?",
                options: ["Are", "they", "closing", "the", "store", "?"],
                type: "Interrogativa"
            },
            {
                situation: "¿Ella va a llorar?",
                correctSentence: "Is she crying?",
                options: ["Is", "she", "crying", "?"],
                type: "Interrogativa"
            }
        ];

        // Variables del juego
        let currentLevel = 0;
        let score = 0;
        let usedLevels = [];

        // Elementos del DOM
        const situationElement = document.getElementById('situation');
        const optionsContainer = document.getElementById('options-container');
        const sentenceContainer = document.getElementById('sentence-container');
        const scoreValueElement = document.getElementById('score-value');
        const feedbackElement = document.getElementById('feedback');
        const resetButton = document.getElementById('reset-btn');
        const checkButton = document.getElementById('check-btn');
        const nextButton = document.getElementById('next-btn');
        const currentLevelElement = document.getElementById('current-level');
        const totalLevelsElement = document.getElementById('total-levels');
        const sentenceTypeElement = document.getElementById('sentence-type');

        // Inicializar el juego
        function initGame() {
            totalLevelsElement.textContent = "20";
            usedLevels = [];
            selectRandomLevel();
            setupEventListeners();
        }

        // Seleccionar un nivel aleatorio que no se haya usado
        function selectRandomLevel() {
            if (usedLevels.length >= gameData.length) {
                // Si ya se usaron todos los niveles, reiniciar
                usedLevels = [];
            }
            
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * gameData.length);
            } while (usedLevels.includes(randomIndex));
            
            usedLevels.push(randomIndex);
            currentLevel = randomIndex;
            loadLevel(currentLevel);
        }

        // Cargar un nivel
        function loadLevel(levelIndex) {
            // Limpiar contenedores
            optionsContainer.innerHTML = '';
            sentenceContainer.innerHTML = '';
            feedbackElement.textContent = '';
            feedbackElement.className = 'feedback';
            
            // Actualizar indicador de nivel
            currentLevelElement.textContent = usedLevels.length;
            
            // Habilitar botones
            checkButton.disabled = false;
            nextButton.disabled = true;
            
            // Cargar situación actual
            const currentData = gameData[levelIndex];
            situationElement.textContent = currentData.situation;
            sentenceTypeElement.textContent = `Tipo de oración: ${currentData.type}`;
            
            // Crear opciones clickeables
            const shuffledOptions = [...currentData.options].sort(() => Math.random() - 0.5);
            shuffledOptions.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.dataset.word = option;
                optionsContainer.appendChild(optionElement);
            });
        }

        // Configurar event listeners
        function setupEventListeners() {
            // Evento para agregar palabras a la oración
            optionsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('option') && !e.target.classList.contains('used')) {
                    addWordToSentence(e.target);
                }
            });

            // Evento para remover palabras de la oración
            sentenceContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('sentence-part')) {
                    removeWordFromSentence(e.target);
                }
            });

            // Botones de control
            resetButton.addEventListener('click', () => {
                loadLevel(currentLevel);
            });

            checkButton.addEventListener('click', checkSentence);

            nextButton.addEventListener('click', nextLevel);
        }

        // Agregar palabra a la oración
        function addWordToSentence(optionElement) {
            // Marcar la opción como usada
            optionElement.classList.add('used');
            
            // Crear elemento para la oración
            const sentencePart = document.createElement('div');
            sentencePart.className = 'sentence-part';
            sentencePart.textContent = optionElement.textContent;
            sentencePart.dataset.word = optionElement.dataset.word;
            
            // Agregar a la oración
            sentenceContainer.appendChild(sentencePart);
        }

        // Remover palabra de la oración
        function removeWordFromSentence(sentencePart) {
            // Encontrar la opción correspondiente
            const options = Array.from(optionsContainer.querySelectorAll('.option'));
            const correspondingOption = options.find(opt => 
                opt.dataset.word === sentencePart.dataset.word && opt.classList.contains('used')
            );
            
            // Reactivar la opción
            if (correspondingOption) {
                correspondingOption.classList.remove('used');
            }
            
            // Remover de la oración
            sentencePart.remove();
        }

        // Comprobar si la oración es correcta
        function checkSentence() {
            const sentenceParts = Array.from(sentenceContainer.querySelectorAll('.sentence-part'));
            const userSentence = sentenceParts.map(part => part.textContent).join(' ');
            const correctSentence = gameData[currentLevel].correctSentence;
            
            // Verificar si la oración del usuario coincide exactamente con la correcta
            if (userSentence === correctSentence) {
                feedbackElement.textContent = '¡Correcto! La oración está bien formada.';
                feedbackElement.className = 'feedback correct';
                score += 10;
                scoreValueElement.textContent = score;
                
                // Deshabilitar opciones no usadas
                optionsContainer.querySelectorAll('.option:not(.used)').forEach(option => {
                    option.style.cursor = 'not-allowed';
                    option.style.opacity = '0.5';
                });
                
                // Habilitar siguiente nivel
                nextButton.disabled = false;
                checkButton.disabled = true;
            } else {
                feedbackElement.textContent = 'La oración no es correcta. Inténtalo de nuevo.';
                feedbackElement.className = 'feedback incorrect';
                
                // Mostrar la oración correcta para ayudar al usuario
                setTimeout(() => {
                    feedbackElement.textContent = `La oración correcta es: ${correctSentence}`;
                }, 2000);
                
                // Restar puntos por intentos fallidos (mínimo 0)
                if (score > 0) {
                    score -= 2;
                    scoreValueElement.textContent = score;
                }
            }
        }

        // Pasar al siguiente nivel
        function nextLevel() {
            if (usedLevels.length < 20) {
                selectRandomLevel();
            } else {
                // Fin del juego
                situationElement.textContent = '¡Felicidades! Has completado todos los niveles.';
                optionsContainer.innerHTML = '';
                sentenceContainer.innerHTML = '';
                sentenceTypeElement.textContent = '';
                feedbackElement.textContent = `Puntuación final: ${score}`;
                feedbackElement.className = 'feedback correct';
                
                // Ocultar botones de control excepto reiniciar
                checkButton.style.display = 'none';
                nextButton.style.display = 'none';
                resetButton.textContent = 'Jugar de nuevo';
                resetButton.addEventListener('click', () => {
                    location.reload();
                });
            }
        }

        // Iniciar el juego cuando la página se carga
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>